/* Page layout: single-column, no sidebar */
.app {
  min-height: 100%;
  display: grid;
  grid-template-columns: 1fr;
  background: #f6faf6; /* same light feel as setup */
}

/* Remove any leftover sidebar if present */
.sidebar, .navbtn { display: none !important; }

/* Containers & cards (match setup) */
.container { width: 100%; max-width: 1100px; margin: 0 auto; padding: 0 16px; }
.card { border: 1px solid var(--border); border-radius: 12px; background: #ffffff; }

/* Main areas */
.main { display: grid; grid-template-rows: auto 1fr auto; min-height: 100vh; }

/* Top bar: white, subtle border like setup panel */
.topbar {
  position: sticky; top: 0; z-index: 5; backdrop-filter: blur(8px);
  background: #ffffff;
  border-bottom: 1px solid var(--border);
}
.topbar .inner { height: 56px; display:flex; align-items:center; justify-content: space-between; }
.brand { display:flex; align-items:center; gap:10px; }
.brand .logo {
  width:28px; height:28px; border-radius: 50%;
  background: linear-gradient(180deg, #166534, #14532d); /* same green as setup CTA */
  display:grid; place-items:center; color:#ffffff; font-weight:700; font-size:12px;
}
.badge { font-size: 13px; color: var(--muted); }
.badge-strong { color: #166534; }

/* Buttons (reuse setup CTA + add outline) */
.btn { padding: 10px 14px; border-radius: 12px; border: 1px solid var(--border); cursor: pointer; }
.btn.cta{
  background: linear-gradient(180deg, #166534, #14532d);
  color: #fff;
  border-color: transparent;
  box-shadow: 0 6px 14px rgba(16,185,129,.22);
}
.btn.cta:hover{ filter: brightness(1.06); }
.btn.cta:active{ transform: translateY(1px); filter: brightness(.98); }
.btn.cta:disabled{ opacity:.6; cursor:not-allowed; }
.btn.outline {
  background: #ffffff;
  color: #166534;
  border-color: #166534;
}
.btn.outline:hover { background: #e8f3e8; }

/* Stream */
.stream { overflow: auto; }
.stream .inner {
  max-width: 820px; margin: 18px auto; padding: 0 18px 18px;
}

/* Message rows */
.msgrow { display:flex; gap:12px; margin-bottom: 12px; align-items: flex-end; }
.msgrow.user { justify-content: flex-end; }
.avatar {
  width: 30px; height: 30px; border-radius: 50%;
  background: #e8f3e8; color: #166534;
  display:grid; place-items:center; font-size: 12px; font-weight: 700;
  border: 1px solid #cfe6d0;
}

/* Bubbles -> Assistant: white card; User: green fill (same palette) */
.bubble {
  max-width: 78%; padding: 12px 14px; border-radius: 14px;
  border: 1px solid var(--border); background: #ffffff;
  box-shadow: 0 2px 10px rgba(0,0,0,.04);
  white-space: pre-wrap; word-wrap: break-word;
}
.bubble.user {
  background: linear-gradient(180deg, #16a34a, #166534);
  color: #ffffff;
  border-color: transparent;
  text-shadow: 0 1px 0 rgba(0,0,0,.25);
}

/* Composer matches setup: white control with green focus ring */
.composer { border-top: 1px solid var(--border); background: #ffffff; }
.composer .inner { max-width: 820px; margin: 0 auto; padding: 12px 18px 18px; }
.inputbar {
  display:flex; gap: 10px; padding: 10px; border: 1px solid var(--border);
  border-radius: 14px; background: #ffffff;
}
.textarea {
  flex: 1; min-height: 44px; max-height: 180px; resize: vertical;
  background: transparent; border: none; color: var(--text); outline: none;
}
.textarea:focus {
  outline: none;
  box-shadow: 0 0 0 2px rgba(16,185,129,.28);
  border-radius: 12px;
}
.hint { margin-top: 8px; color: var(--muted); font-size: 12px; }

/* Typing indicator */
.typing { display:inline-flex; gap:6px; }
.dot { width:8px; height:8px; border-radius:50%; background: #9fb6a6; animation: bounce 1.1s infinite; }
.dot:nth-child(2){ animation-delay: .15s; }
.dot:nth-child(3){ animation-delay: .3s; }
@keyframes bounce { 0%,80%,100%{ transform: translateY(0)} 40%{ transform: translateY(-6px)} }

/* Avatar base stays the same */
.avatar {
  width: 30px; height: 30px; border-radius: 50%;
  display: grid; place-items: center; font-size: 12px; font-weight: 700;
  border: 1px solid var(--border);
}

/* Advisor image avatar: circular, covers, with subtle green ring */
.avatar.advisor {
  position: relative; overflow: hidden;
  border-color: #9bd3a5; /* soft green ring */
}
.avatar.advisor img {
  width: 100%; height: 100%; object-fit: cover; display: block;
}

/* Fallback (no image) â€” same as before, green badge with icon */
.avatar.advisor.fallback {
  background: linear-gradient(180deg, #166534, #14532d);
  color: #ffffff; border-color: transparent;
}

/* User avatar unchanged from previous step */
.avatar.user {
  background: #e8f3e8;
  color: #166534;
  border-color: #cfe6d0;
}
